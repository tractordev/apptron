name = "apptron"
compatibility_date = "2025-08-21"
main = "./router/worker.ts"
routes = [
  { pattern = "*.apptron.dev/*", zone_name = "apptron.dev" },
  { pattern = "apptron.dev/*", zone_name = "apptron.dev" }
]

[assets]
directory = "./assets"
binding = "assets"
run_worker_first = [ "/workbench.json" ]

[observability.logs]
enabled = true

[[containers]]
class_name = "Session"
image = "./session/Dockerfile"
max_instances = 1

[[durable_objects.bindings]]
class_name = "Session"
name = "session"

[[migrations]]
new_sqlite_classes = [ "Session" ]
tag = "v1"